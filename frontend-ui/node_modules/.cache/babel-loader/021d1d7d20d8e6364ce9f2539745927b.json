{"ast":null,"code":"import WhoIs from './components/WhoIs.vue';\nimport LangSelect from './components/LangSelect.vue';\nexport default {\n  name: 'App',\n  components: {\n    WhoIs,\n    LangSelect\n  },\n\n  data() {\n    return {\n      title: \"What is your favourite programming language?\",\n      username: \"\",\n      progrLang: \"\",\n      votes: 0,\n      totalVotes: 0,\n      showIndex: true,\n      showResults: false\n    };\n  },\n\n  methods: {\n    nameChanged(name) {\n      this.username = name;\n    },\n\n    progrLangChanged(lang) {\n      this.progrLang = lang;\n    },\n\n    toggleResultsVisible() {\n      this.showIndex = false;\n      this.showResults = true;\n    },\n\n    sendVote() {\n      // Creating a XHR object\n      let xhr = new XMLHttpRequest(); //Django server path\n\n      let url = \"http://127.0.0.1:8000/api/\"; // open a connection\n\n      xhr.open(\"POST\", url, true); // Set the request header i.e. which type of content you are sending\n\n      xhr.setRequestHeader(\"Content-Type\", \"application/json\"); // Create a state change callback\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4 && xhr.status === 200) {\n          const json_response = xhr.responseText;\n          const responseObj = JSON.parse(json_response);\n          this.username = responseObj.username;\n          this.progrLang = responseObj.progrLang;\n          this.votes = responseObj.votes;\n          this.totalVotes = responseObj.totalVotes;\n          this.toggleResultsVisible();\n        }\n      }; // Converting JSON data to string\n\n\n      var data = JSON.stringify({\n        \"username\": this.username,\n        \"progrLang\": this.progrLang\n      }); // Sending data with the request\n\n      xhr.send(data);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAkBA,OAAOA,KAAP,MAAkB,wBAAlB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AAGA,eAAe;AACbC,MAAI,EAAE,KADO;AAEbC,YAAU,EAAE;AAAEH,SAAF;AAASC;AAAT,GAFC;;AAGbG,MAAI,GAAG;AACL,WAAO;AACLC,WAAK,EAAE,8CADF;AAELC,cAAQ,EAAE,EAFL;AAGLC,eAAS,EAAE,EAHN;AAILC,WAAK,EAAE,CAJF;AAKLC,gBAAU,EAAE,CALP;AAMLC,eAAS,EAAE,IANN;AAOLC,iBAAW,EAAE;AAPR,KAAP;AASD,GAbY;;AAcbC,SAAO,EAAE;AACPC,eAAW,CAACX,IAAD,EAAO;AAChB,WAAKI,QAAL,GAAgBJ,IAAhB;AACD,KAHM;;AAKPY,oBAAgB,CAACC,IAAD,EAAO;AACrB,WAAKR,SAAL,GAAiBQ,IAAjB;AACD,KAPM;;AASPC,wBAAoB,GAAG;AACrB,WAAKN,SAAL,GAAiB,KAAjB;AACA,WAAKC,WAAL,GAAmB,IAAnB;AACD,KAZM;;AAcPM,YAAQ,GAAG;AAET;AACA,UAAIC,GAAE,GAAI,IAAIC,cAAJ,EAAV,CAHS,CAKT;;AACA,UAAIC,GAAE,GAAI,4BAAV,CANS,CAQT;;AACAF,SAAG,CAACG,IAAJ,CAAS,MAAT,EAAiBD,GAAjB,EAAsB,IAAtB,EATS,CAWT;;AACAF,SAAG,CAACI,gBAAJ,CAAqB,cAArB,EAAqC,kBAArC,EAZS,CAcT;;AACAJ,SAAG,CAACK,kBAAJ,GAAyB,YAAY;AACjC,YAAIL,GAAG,CAACM,UAAJ,KAAmB,CAAnB,IAAwBN,GAAG,CAACO,MAAJ,KAAe,GAA3C,EAAgD;AAC9C,gBAAMC,aAAY,GAAIR,GAAG,CAACS,YAA1B;AACA,gBAAMC,WAAU,GAAIC,IAAI,CAACC,KAAL,CAAWJ,aAAX,CAApB;AACA,eAAKpB,QAAL,GAAgBsB,WAAW,CAACtB,QAA5B;AACA,eAAKC,SAAL,GAAiBqB,WAAW,CAACrB,SAA7B;AACA,eAAKC,KAAL,GAAaoB,WAAW,CAACpB,KAAzB;AACA,eAAKC,UAAL,GAAkBmB,WAAW,CAACnB,UAA9B;AACA,eAAKO,oBAAL;AACF;AACH,OAVD,CAfS,CA2BT;;;AACA,UAAIZ,IAAG,GAAIyB,IAAI,CAACE,SAAL,CAAe;AAAE,oBAAY,KAAKzB,QAAnB;AAA6B,qBAAa,KAAKC;AAA/C,OAAf,CAAX,CA5BS,CA8BT;;AACAW,SAAG,CAACc,IAAJ,CAAS5B,IAAT;AACF;;AA9CO;AAdI,CAAf","names":["WhoIs","LangSelect","name","components","data","title","username","progrLang","votes","totalVotes","showIndex","showResults","methods","nameChanged","progrLangChanged","lang","toggleResultsVisible","sendVote","xhr","XMLHttpRequest","url","open","setRequestHeader","onreadystatechange","readyState","status","json_response","responseText","responseObj","JSON","parse","stringify","send"],"sourceRoot":"","sources":["/app/src/App.vue"],"sourcesContent":["<template>\n  <div v-if=\"showIndex\">\n    <h1>{{ title }}</h1>\n    <WhoIs @nameChanged=\"nameChanged\" />\n    <LangSelect @progrLangChanged=\"progrLangChanged\" />\n\n    <div id=\"subbtn\">\n        <button @click =\"sendVote\" id=\"vote\">Vote</button>\n    </div>\n  </div>\n  <div v-if=\"showResults\">\n    <h1>User {{ username }} voted {{ progrLang }}</h1>\n    <h2>There were {{ votes }} on {{ progrLang }} of all {{ totalVotes }} votes</h2>\n  </div>\n</template>\n\n\n<script>\nimport WhoIs from './components/WhoIs.vue'\nimport LangSelect from './components/LangSelect.vue'\n\n\nexport default {\n  name: 'App',\n  components: { WhoIs, LangSelect },\n  data() {\n    return {\n      title: \"What is your favourite programming language?\",\n      username: \"\",\n      progrLang: \"\",\n      votes: 0,\n      totalVotes: 0,\n      showIndex: true,\n      showResults: false\n    }\n  },\n  methods: {\n    nameChanged(name) {\n      this.username = name;\n    },\n\n    progrLangChanged(lang) {\n      this.progrLang = lang;\n    },\n\n    toggleResultsVisible() {\n      this.showIndex = false;\n      this.showResults = true;\n    },\n\n    sendVote() {\n\n      // Creating a XHR object\n      let xhr = new XMLHttpRequest();\n\n      //Django server path\n      let url = \"http://127.0.0.1:8000/api/\";\n  \n      // open a connection\n      xhr.open(\"POST\", url, true);\n\n      // Set the request header i.e. which type of content you are sending\n      xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n\n      // Create a state change callback\n      xhr.onreadystatechange = function () {\n          if (xhr.readyState === 4 && xhr.status === 200) {\n            const json_response = xhr.responseText;\n            const responseObj = JSON.parse(json_response);\n            this.username = responseObj.username;\n            this.progrLang = responseObj.progrLang;\n            this.votes = responseObj.votes;\n            this.totalVotes = responseObj.totalVotes;\n            this.toggleResultsVisible();\n          }\n      };\n\n      // Converting JSON data to string\n      var data = JSON.stringify({ \"username\": this.username, \"progrLang\": this.progrLang });\n\n      // Sending data with the request\n      xhr.send(data);\n    }\n  } \n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n\n#subbtn {\n    margin-top: 100px;\n}\n\n#vote {\n    background:#faa23e;\n    width: 80px;\n    height: 60px;\n    border-radius: 15px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}