{"ast":null,"code":"import WhoIs from './components/WhoIs.vue';\nimport LangSelect from './components/LangSelect.vue';\nimport ErrorModal from './components/ErrorModal.vue';\nimport axios from 'axios';\naxios.defaults.xsrfHeaderName = 'X-csrftoken';\naxios.defaults.xsrfCookieName = 'csrftoken';\naxios.defaults.withCredentials = true;\nexport default {\n  name: 'App',\n  components: {\n    WhoIs,\n    LangSelect,\n    ErrorModal\n  },\n\n  mounted() {\n    document.onreadystatechange = () => {\n      if (document.readyState == \"complete\") {\n        this.getCSRF();\n      }\n    };\n  },\n\n  data() {\n    return {\n      title: \"What is your favourite programming language?\",\n      dataForAPI: {\n        username: '',\n        progrLang: ''\n      },\n      votes: 0,\n      totalVotes: 0,\n      showIndex: true,\n      showResults: false,\n      showError: false,\n      enableDefaultSel: true,\n      usernameExists: false,\n      message: ''\n    };\n  },\n\n  methods: {\n    getCSRF() {\n      axios.get('http://localhost:8000/' + process.env.URI_ENTRYP_PATH + process.env.URI_CSRF_PATH);\n    },\n\n    nameChanged(name) {\n      this.usernameExists = true;\n      this.dataForAPI.username = name;\n    },\n\n    progrLangChanged(lang) {\n      this.enableDefaultSel = false;\n      this.dataForAPI.progrLang = lang;\n    },\n\n    toggleResultsVisible() {\n      this.showIndex = false;\n      this.showResults = true;\n      this.showError = false;\n    },\n\n    toggleErrorVisible() {\n      this.showIndex = false;\n      this.showResults = false;\n      this.showError = true;\n    },\n\n    sendVote() {\n      if (this.usernameExists) {\n        if (this.enableDefaultSel) {\n          this.dataForAPI.progrLang = \"C\";\n        }\n\n        axios.post('http://localhost:8000/' + process.env.URI_ENTRYP_PATH, this.dataForAPI).then(response => {\n          if (!response.data.error) {\n            this.username = response.data.username;\n            this.progrLang = response.data.progrLang;\n            this.votes = response.data.votes;\n            this.totalVotes = response.data.totalVotes;\n            this.toggleResultsVisible();\n          } else {\n            this.toggleErrorVisible();\n            this.message = response.data.error;\n          }\n        }).catch(error => console.log(error));\n      } else {\n        this.toggleErrorVisible();\n        this.message = 'Username is missing';\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAoBA,OAAOA,KAAP,MAAkB,wBAAlB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEAA,KAAK,CAACC,QAAN,CAAeC,cAAf,GAAgC,aAAhC;AACAF,KAAK,CAACC,QAAN,CAAeE,cAAf,GAAgC,WAAhC;AACAH,KAAK,CAACC,QAAN,CAAeG,eAAf,GAAiC,IAAjC;AAEA,eAAe;AACbC,MAAI,EAAE,KADO;AAEbC,YAAU,EAAE;AAAET,SAAF;AAASC,cAAT;AAAqBC;AAArB,GAFC;;AAGbQ,SAAO,GAAG;AACRC,YAAQ,CAACC,kBAAT,GAA8B,MAAM;AAClC,UAAGD,QAAQ,CAACE,UAAT,IAAuB,UAA1B,EAAsC;AACpC,aAAKC,OAAL;AACF;AACF,KAJA;AAKD,GATY;;AAUbC,MAAI,GAAG;AACL,WAAO;AACLC,WAAK,EAAE,8CADF;AAGLC,gBAAU,EAAE;AACVC,gBAAQ,EAAE,EADA;AAEVC,iBAAS,EAAE;AAFD,OAHP;AAQLC,WAAK,EAAE,CARF;AASLC,gBAAU,EAAE,CATP;AAWLC,eAAS,EAAE,IAXN;AAYLC,iBAAW,EAAE,KAZR;AAaLC,eAAS,EAAE,KAbN;AAeLC,sBAAgB,EAAE,IAfb;AAgBLC,oBAAc,EAAE,KAhBX;AAkBLC,aAAO,EAAE;AAlBJ,KAAP;AAoBD,GA/BY;;AAgCbC,SAAO,EAAE;AACPd,WAAO,GAAG;AACRX,WAAK,CAAC0B,GAAN,CAAU,2BAA2BC,OAAO,CAACC,GAAR,CAAYC,eAAvC,GAAyDF,OAAO,CAACC,GAAR,CAAYE,aAA/E;AACD,KAHM;;AAKPC,eAAW,CAAC1B,IAAD,EAAO;AAChB,WAAKkB,cAAL,GAAsB,IAAtB;AACA,WAAKT,UAAL,CAAgBC,QAAhB,GAA2BV,IAA3B;AACD,KARM;;AAUP2B,oBAAgB,CAACC,IAAD,EAAO;AACrB,WAAKX,gBAAL,GAAwB,KAAxB;AACA,WAAKR,UAAL,CAAgBE,SAAhB,GAA4BiB,IAA5B;AACD,KAbM;;AAePC,wBAAoB,GAAG;AACrB,WAAKf,SAAL,GAAiB,KAAjB;AACA,WAAKC,WAAL,GAAmB,IAAnB;AACA,WAAKC,SAAL,GAAiB,KAAjB;AACD,KAnBM;;AAqBPc,sBAAkB,GAAG;AACnB,WAAKhB,SAAL,GAAiB,KAAjB;AACA,WAAKC,WAAL,GAAmB,KAAnB;AACA,WAAKC,SAAL,GAAiB,IAAjB;AACD,KAzBM;;AA2BPe,YAAQ,GAAG;AACT,UAAI,KAAKb,cAAT,EAAyB;AACvB,YAAI,KAAKD,gBAAT,EAA2B;AACzB,eAAKR,UAAL,CAAgBE,SAAhB,GAA4B,GAA5B;AACF;;AACAhB,aAAK,CAACqC,IAAN,CAAW,2BAA2BV,OAAO,CAACC,GAAR,CAAYC,eAAlD,EAAmE,KAAKf,UAAxE,EACCwB,IADD,CACMC,QAAO,IAAK;AAChB,cAAI,CAACA,QAAQ,CAAC3B,IAAT,CAAc4B,KAAnB,EAA0B;AACxB,iBAAKzB,QAAL,GAAgBwB,QAAQ,CAAC3B,IAAT,CAAcG,QAA9B;AACA,iBAAKC,SAAL,GAAiBuB,QAAQ,CAAC3B,IAAT,CAAcI,SAA/B;AACA,iBAAKC,KAAL,GAAasB,QAAQ,CAAC3B,IAAT,CAAcK,KAA3B;AACA,iBAAKC,UAAL,GAAkBqB,QAAQ,CAAC3B,IAAT,CAAcM,UAAhC;AACA,iBAAKgB,oBAAL;AACF,WANA,MAMO;AACL,iBAAKC,kBAAL;AACA,iBAAKX,OAAL,GAAee,QAAQ,CAAC3B,IAAT,CAAc4B,KAA7B;AACF;AACD,SAZD,EAaCC,KAbD,CAaOD,KAAI,IAAKE,OAAO,CAACC,GAAR,CAAYH,KAAZ,CAbhB;AAcF,OAlBA,MAkBO;AACL,aAAKL,kBAAL;AACA,aAAKX,OAAL,GAAe,qBAAf;AACF;AACF;;AAlDO;AAhCI,CAAf","names":["WhoIs","LangSelect","ErrorModal","axios","defaults","xsrfHeaderName","xsrfCookieName","withCredentials","name","components","mounted","document","onreadystatechange","readyState","getCSRF","data","title","dataForAPI","username","progrLang","votes","totalVotes","showIndex","showResults","showError","enableDefaultSel","usernameExists","message","methods","get","process","env","URI_ENTRYP_PATH","URI_CSRF_PATH","nameChanged","progrLangChanged","lang","toggleResultsVisible","toggleErrorVisible","sendVote","post","then","response","error","catch","console","log"],"sourceRoot":"","sources":["/app/src/App.vue"],"sourcesContent":["<template>\n  <div @onload=\"getCSRF\"></div>\n  <div v-if=\"showIndex\">\n    <h1>{{ title }}</h1>\n    <WhoIs @nameChanged=\"nameChanged\" />\n    <LangSelect @progrLangChanged=\"progrLangChanged\" />\n\n    <div id=\"subbtn\">\n        <button @click =\"sendVote\" id=\"vote\">Vote</button>\n    </div>\n  </div>\n  <div v-if=\"showResults\">\n    <h1>User {{ username }} voted {{ progrLang }}</h1>\n    <h2>There were {{ votes }} on {{ progrLang }} of all {{ totalVotes }} votes</h2>\n  </div>\n  <ErrorModal :errorMsg=\"message\" v-if=\"showError\" />\n</template>\n\n\n<script>\nimport WhoIs from './components/WhoIs.vue'\nimport LangSelect from './components/LangSelect.vue'\nimport ErrorModal from './components/ErrorModal.vue'\nimport axios from 'axios'\n\naxios.defaults.xsrfHeaderName = 'X-csrftoken';\naxios.defaults.xsrfCookieName = 'csrftoken';\naxios.defaults.withCredentials = true;\n\nexport default {\n  name: 'App',\n  components: { WhoIs, LangSelect, ErrorModal },\n  mounted() {\n    document.onreadystatechange = () => {\n      if(document.readyState == \"complete\") {\n        this.getCSRF();\n      }\n    }\n  },\n  data() {\n    return {\n      title: \"What is your favourite programming language?\",\n      \n      dataForAPI: {\n        username: '',\n        progrLang: '',\n      },\n      \n      votes: 0,\n      totalVotes: 0,\n\n      showIndex: true,\n      showResults: false,\n      showError: false,\n\n      enableDefaultSel: true,\n      usernameExists: false,\n\n      message: '',\n    }\n  },\n  methods: {\n    getCSRF() {\n      axios.get('http://localhost:8000/' + process.env.URI_ENTRYP_PATH + process.env.URI_CSRF_PATH)\n    },\n\n    nameChanged(name) {\n      this.usernameExists = true;\n      this.dataForAPI.username = name;\n    },\n\n    progrLangChanged(lang) {\n      this.enableDefaultSel = false;\n      this.dataForAPI.progrLang = lang;\n    },\n\n    toggleResultsVisible() {\n      this.showIndex = false;\n      this.showResults = true;\n      this.showError = false;\n    },\n\n    toggleErrorVisible() {\n      this.showIndex = false;\n      this.showResults = false;\n      this.showError = true;\n    },\n\n    sendVote() {\n      if (this.usernameExists) {\n        if (this.enableDefaultSel) {\n          this.dataForAPI.progrLang = \"C\";\n        }\n        axios.post('http://localhost:8000/' + process.env.URI_ENTRYP_PATH, this.dataForAPI)\n        .then(response => {\n          if (!response.data.error) {\n            this.username = response.data.username;\n            this.progrLang = response.data.progrLang;\n            this.votes = response.data.votes;\n            this.totalVotes = response.data.totalVotes;\n            this.toggleResultsVisible();\n          } else {\n            this.toggleErrorVisible();\n            this.message = response.data.error;\n          }\n        })\n        .catch(error => console.log(error));\n      } else {\n        this.toggleErrorVisible();\n        this.message = 'Username is missing'\n      }\n    }\n  } \n}\n\n\n\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n\n#subbtn {\n    margin-top: 100px;\n}\n\n#vote {\n    background:#faa23e;\n    width: 80px;\n    height: 60px;\n    border-radius: 15px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}